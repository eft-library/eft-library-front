# 프론트엔드 (Next.js) 추천 라이브러리 및 기술

## React Query / TanStack Query

역할: 서버 상태 관리, 데이터 캐싱, 자동 리패치, Optimistic UI 지원

장점: 새로고침 없이 글/댓글 상태를 자동 갱신하며 사용자 경험 부드러움

사용 예시: 댓글 작성 시, 서버 응답을 기다리지 않고 먼저 UI를 갱신 후 실패 시 롤백 (Optimistic Update)

# 커뮤니티 기능 기획 (FastAPI + Kafka + Next.js)

## 1. UI/UX 설계

### 기본 원칙

- 사용자 불편 최소화 (새로고침 없는 UX, 부드러운 반응)
- 직관적인 에디터, 이모티콘 삽입 기능
- 동영상은 링크 자동 파싱 (치지직, 숲, 유튜브)
- 에디터: Tiptap

### 사용자 기능

- 사용자 차단 (차단한 사용자 글/댓글 비노출)
- 차단된 사용자의 댓글에 대댓글 대응 방식 정의
- 마이페이지
  - 닉네임 수정
  - 게시글 및 댓글 작성 목록
- 특정 사용자 작성글/댓글 전체 조회

---

## 2. 게시글 기능

### 작성/조회/수정/삭제

- 사진 삽입 (UUID 기반 업로드)
- 동영상 링크 자동 변환
- 카테고리 선택
- 검색 기능 (게시글 단독 또는 댓글 포함 여부 정의)

### 이슈글

- 좋아요/댓글/조회수 기반 자동 선정
- 이슈 선정일 기준 노출
- 운영자 수동 이슈 설정 기능도 고려 가능

### 좋아요/싫어요/신고

- 좋아요/싫어요 분리 저장
- 신고 누적 시 자동 블라인드 기능 고려

### 조회수

- Redis 기반 유저별 중복 방지 (새로 도입할 생각)
- TTL 24시간 기준으로 카운팅 유지

---

## 3. 댓글 기능

### 댓글/대댓글

- 작성/수정/삭제
- 대댓글은 계단식 UI
- 이모티콘 삽입은 버튼으로 inline 처리

### 인기 댓글

- 좋아요 상위 3개 댓글 노출
- 해당 댓글로 바로가기 기능

### 알림 기능

- 댓글 작성 시 작성자에게 알림
- Kafka → WebSocket 또는 Redis PubSub 방식 고려

### 좋아요/싫어요/신고

---

## 4. 서버 구조

### FastAPI

- 게시글/댓글 CRUD
- 좋아요/싫어요/신고 처리
- 사용자 조회, 마이페이지 API

### Kafka

- 댓글 알림 처리
- 신고 누적 알림 → 운영자 메일 전송
- 이슈글 선정 및 알림 전파

### Redis

- 조회수 중복 방지 (`userId:postId`, TTL=24시간)
- 알림 캐시 저장소로 활용 가능

---

## 5. 배치 처리 (Airflow)

### 정기 작업

- 탈퇴 사용자 → 30일 후 영구 삭제
- 사용자 밴 기간 만료 시 자동 해제
- 이슈글 갱신
  - 좋아요 기반
  - 주기적 이슈글 재선정 및 해제

---

## 6. 향후 고려 기능

| 기능명      | 설명                                              |
| ----------- | ------------------------------------------------- |
| 관리 페이지 | 신고 리스트, 밴 처리, 사용자 검색                 |
| 등급/포인트 | 활동량 기반 배지, 랭킹 시스템 (우선순위 낮음)     |
| 통계/분석   | 사용자 활동 통계, 인기 카테고리 등 시각화 및 활용 |

---
